# draw2pdf - Simple PDF Drawing Library (C++)

### What Is draw2pdf?

**draw2pdf** is a small, easy to use C++ library for drawing
simple 2D graphics (including lines, polygons, and bitmap
images) to an Adobe PDF file.  

I needed a way to quickly get some vector drawings from my
experimental software projects into PDF files that could be
easily viewed and shared with other people, so I wrote this
library for my own use.  You may use it at your own risk, as
long as you abide by the terms and conditions outlined in the
**Legal Notices** section below.  


**Language:**

 * **draw2pdf** is written in C++.

 * **draw2pdf** uses the **zlib** compression library which is written in C.


**Platform:**

 * **draw2pdf** currently works on Windows only.
   Support for other platforms may be added in future versions.


**Dependencies:**

 * **draw2pdf** requires the **zlib** compression library version
   1.14 or later.  A copy is included here in the **zlib114**
   subdirectory.  


**Build Tools:**

 * **draw2pdf** been tested with Microsoft C/C++ compiler version
   19.x (from Visual Studio 2022).  Changes may be needed to build
   **draw2pdf** with a different compiler.

---

### How To Build:

 * In a Windows command prompt, **CD** to the directory where the
   **draw2pdf** source files are located.

 * Run **NMAKE** from the command prompt to run the build script.

 * If successful, the **draw2pdf.lib** and **pdftest.exe**
   files will have been created in the **bin64** subdirectory.

 * NOTE:  To erase the binaries and intermediate files from a
   prior build, run **NMAKE clean** from the command prompt.

---

### Test The Build:

 * To check if **draw2pdf** is working after building it, run
   the program **bin64\pdftest.exe** from the command prompt.
   If successful, the **test.pdf** file will be created in
   the current working directory.

 * Next, look at the **test.pdf** file in a PDF viewer (for example,
   the Adobe Acrobat viewer app) to confirm that the test graphics
   appear correctly in the PDF file.  The two pages in the
   **test.pdf** file should look like this:
        [**test_pg1.png**](sample_output/test_pg1.png)
   and
        [**test_pg2.png**](sample_output/test_pg2.png)

---

### How To Use draw2pdf In Your C++ Program:

 * **#include** the **draw2pdf.h** header file in your C++ file.

 * In your C++ project or makefile, add **draw2pdf.lib** to the
   list of libraries that link to your C++ program.  

 * Instantiate a **Draw2pdf** object in your C++ code.

 * Call the **Open** member function to begin writing a new PDF file.

 * Call other member function of **Draw2pdf** to draw lines, polylines,
   polygons, and/or bitmap images into your PDF file.

 * Call the **Close** member function to finish writing the PDF file.

 * To handle errors from a **Draw2pdf** object, it is recommended
   that your C++ code catch exceptions of type **PDFException**.

 * For more details about using this library, see comments in the
   **draw2pdf.h** header file.  

---

### Files:

**draw2pdf Source Code Files**:

* [draw2pdf.h](draw2pdf.h): C++ header file for the **Draw2pdf** class object.

* [draw2pdf.cpp](draw2pdf.cpp): C++ code for the **Draw2pdf** class object.

* [pdftest.cpp](pdftest.cpp):  C++ code for a small test program
that uses a **Draw2pdf** object to send some 2D graphics to a PDF file.  

* [ascii85.h](ascii85.h):  C++ code for encoding text into the
ASCII-85 format.  PDF files use ASCII-85 format for some of the
binary data blocks inside the file.  

* [makefile](makefile):  NMake script for building
  **draw2pdf.lib** and **pdftest.exe** from the source code.  


**Additional Files**:

* [sample_output](sample_output):  This subdirectory contains
several example PDF files that were creating using **draw2pdf**,
along with some PNG image files that show what the test output
from the **pdftest** program is expected to look like.  

* [zlib114](zlib114):  This subdirectory contains the source
code for **zlib**, an open-source compression library that
**draw2pdf** uses.  See here for zlib general info and legal
notices:  [zlib114/README](zlib114/README).  

---

### To Do List:  Unimplemented/unfinished items and bugs:

   * Update draw2pdf to use a newer version of zlib.
   * Add more tests.
   * Add a C-compatible calling interface for draw2pdf, so it
     can be more easily used by programs written in languages
     other than C++.
   * Modify draw2pdf to work on Linux.
   * Modify draw2pdf to work on macOS.
   * Implement transparency.  Changing alpha of the line/fill
     colors should work.  Possibly use masks for 32-bit images.
   * Implement dashed/patterned line styles.
   * Implement selecting different fonts for text drawing.
   * Test the PDF files generated by draw2pdf against some of the
     online PDF syntax/compliance checkers.
   * Add support for 3D PDF files.

---

### Legal Notices:

```
// (C) Copyright 2022 Ammon R. Campbell.
//
// I wrote this code for use in my own educational and experimental
// programs, but you may also freely use it in yours as long as you
// abide by the following terms and conditions.
//
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions
// are met:
//   * Redistributions of source code must retain the above copyright
//     notice, this list of conditions and the following disclaimer.
//   * Redistributions in binary form must reproduce the above
//     copyright notice, this list of conditions and the following
//     disclaimer in the documentation and/or other materials
//     provided with the distribution.
//   * The name(s) of the author(s) and contributors (if any) may not
//     be used to endorse or promote products derived from this
//     software without specific prior written permission.
// 
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND
// CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
// INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
// DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT HOLDERS BE LIABLE FOR
// ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
// OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
// BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
// LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
// USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
// DAMAGE.  IN OTHER WORDS, USE AT YOUR OWN RISK, NOT OURS.  
```

-*- end -*-
